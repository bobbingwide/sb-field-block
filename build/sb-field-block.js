(()=>{"use strict";var e,o={930:(e,o,l)=>{const n=window.wp.blocks,t=window.wp.i18n,s=window.wp.blockEditor,r=window.wp.components,i=window.wp.data,a=window.wp.coreData,c=window.wp.element,d=window.ReactJSXRuntime;const u=e=>{const o=(0,i.useSelect)((o=>o("oiksb/fields").getFields(e.type)),[e.type]);console.log("FieldSelect"),console.log(o),console.log(e),console.log("FS after");var l,n,t,s=(l=o,n=e.postType,t=function(e,o){if(console.log(e),0===e.length)return[];var l=e.filter((function(e){return e.postType==o}));return console.log(l),l.length?l[0].fields:[]}(l,n),console.log(t),t?t.map((e=>function(e){return{value:e.name,label:e["#title"]}}(e))):[]);return void 0===e.value&&e.onChange(function(e){return e.length?e[0].value:null}(s)),(0,d.jsx)(r.SelectControl,{label:"Field",value:e.value,options:s,onChange:e.onChange})},p=e=>{const o=(0,i.useSelect)((e=>e("oiksb/fields").getFields()),[]);if(console.log("PostTypeSelect"),console.log(o),console.log(e),console.log("PT after"),o&&o.length)var l=o.map((e=>function(e){return{value:e.postType,label:e.label}}(e)));else l=[{value:"",label:"Wait for it..."}];return(0,d.jsx)(r.SelectControl,{label:"Post Type",value:e.value,options:l,onChange:e.onChange})},f=window.wp.apiFetch;var v=l.n(f);const g={getFields(e,o){const{fields:l}=e;return l}},b={*getFields(e){const o=yield h.getFields("/oiksb/v1/fields");return h.setFields(o)}},h={setFields:e=>({type:"SET_FIELDS",fields:e}),getFields:e=>({type:"GET_FIELDS",path:e})},w={GET_FIELDS:e=>v()({path:e.path})};(0,i.registerStore)("oiksb/fields",{actions:h,controls:w,reducer:function(e={fields:[]},o){return console.log("reducer"),console.log(e),console.log(o),"SET_FIELDS"===o.type?{...e,fields:o.fields}:e},resolvers:b,selectors:g});const y=window.wp.serverSideRender;var m=l.n(y);function x(e,o){var l=function(e){const o=(0,i.useSelect)((e=>e("oiksb/fields").getFields()),[]);console.log("getPostFields"),console.log(o);var l=o.find((({postType:o})=>o===e));return console.log(l),console.log("GPF after"),l}(e);if(!l)return null;var n=l.fields.find((({name:e})=>e===o));return console.log(n),n}const j=e=>{var o=e.postType,l=e.fieldName,n=e.fieldValue,t=function(e,o){var l=x(e,o);return l?l["#title"]:o}(o,l),s=function(e,o){var l=x(e,o);return l?l["#field_type"]:void 0}(o,l);if(function(e){console.log(e);var o={text:!1,number:!1};return!o.hasOwnProperty(e)||o.fieldType}(s)){let o={post_id:e.context.postId};return(0,d.jsx)(m(),{block:"oiksb/sb-field-block",attributes:e.attributes,urlQueryArgs:o})}return e.attributes.showLabel?(0,d.jsxs)("div",{className:"bw_metadata "+l,children:[(0,d.jsx)("span",{className:"label "+l,children:t}),(0,d.jsx)("span",{className:"sep",children:": "}),(0,d.jsx)("span",{className:"value",children:n})]}):(0,d.jsx)("div",{className:"bw_metadata "+l,children:(0,d.jsx)("span",{className:"value",children:n})})};(0,n.registerBlockType)("oiksb/sb-field-block",{edit:function({setAttributes:e,attributes:o,context:l}){const n=(0,s.useBlockProps)();l.postType,void 0===o.postType&&g(l.postType);var[i,f]=(0,a.useEntityProp)("postType",l.postType,"meta");console.log("Meta before"),console.log(i),console.log("MA");const v=i&&""!=o.fieldName?i[o.fieldName]:"Please set Field name";function g(o){e({postType:o}),e({fieldName:void 0})}return(0,d.jsxs)(c.Fragment,{children:[(0,d.jsxs)(s.InspectorControls,{children:[(0,d.jsx)(r.PanelBody,{children:(0,d.jsx)(r.PanelRow,{children:(0,d.jsx)(p,{value:o.postType,onChange:g})})}),(0,d.jsx)(r.PanelBody,{children:(0,d.jsx)(r.PanelRow,{children:(0,d.jsx)(u,{value:o.fieldName,onChange:o=>{e({fieldName:o})},postType:o.postType})})}),(0,d.jsx)(r.PanelBody,{children:(0,d.jsx)(r.PanelRow,{children:(0,d.jsx)(r.ToggleControl,{label:(0,t.__)("Show label","sb-field-block"),checked:!!o.showLabel,onChange:l=>{e({showLabel:!o.showLabel})}})})})]}),(0,d.jsx)("div",{...n,children:(0,d.jsx)(j,{postType:o.postType,fieldName:o.fieldName,fieldValue:v,attributes:o,context:l})})]})},save:function(){return null}})}},l={};function n(e){var t=l[e];if(void 0!==t)return t.exports;var s=l[e]={exports:{}};return o[e](s,s.exports,n),s.exports}n.m=o,e=[],n.O=(o,l,t,s)=>{if(!l){var r=1/0;for(d=0;d<e.length;d++){l=e[d][0],t=e[d][1],s=e[d][2];for(var i=!0,a=0;a<l.length;a++)(!1&s||r>=s)&&Object.keys(n.O).every((e=>n.O[e](l[a])))?l.splice(a--,1):(i=!1,s<r&&(r=s));if(i){e.splice(d--,1);var c=t();void 0!==c&&(o=c)}}return o}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[l,t,s]},n.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return n.d(o,{a:o}),o},n.d=(e,o)=>{for(var l in o)n.o(o,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:o[l]})},n.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={143:0,150:0};n.O.j=o=>0===e[o];var o=(o,l)=>{var t,s,r=l[0],i=l[1],a=l[2],c=0;if(r.some((o=>0!==e[o]))){for(t in i)n.o(i,t)&&(n.m[t]=i[t]);if(a)var d=a(n)}for(o&&o(l);c<r.length;c++)s=r[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(d)},l=self.webpackChunksb_field_block=self.webpackChunksb_field_block||[];l.forEach(o.bind(null,0)),l.push=o.bind(null,l.push.bind(l))})();var t=n.O(void 0,[150],(()=>n(930)));t=n.O(t)})();