(()=>{"use strict";var e,o={930:(e,o,l)=>{const t=window.wp.blocks,n=(window.wp.i18n,window.wp.blockEditor),s=window.wp.components,r=window.wp.data,i=window.wp.coreData,a=window.wp.element,c=window.ReactJSXRuntime;const d=e=>{const o=(0,r.useSelect)((o=>o("oiksb/fields").getFields(e.type)),[e.type]);console.log("FieldSelect"),console.log(o),console.log(e),console.log("FS after");var l,t,n,i=(l=o,t=e.postType,n=function(e,o){if(console.log(e),0===e.length)return[];var l=e.filter((function(e){return e.postType==o}));return console.log(l),l.length?l[0].fields:[]}(l,t),console.log(n),n?n.map((e=>function(e){return{value:e.name,label:e["#title"]}}(e))):[]);return(0,c.jsx)(s.SelectControl,{label:"Field",value:e.value,options:i,onChange:e.onChange})},p=e=>{const o=(0,r.useSelect)((e=>e("core").getPostTypes({per_page:-1})),[]);if(console.log("PostTypeSelect"),console.log(o),console.log(e),console.log("PT after"),o&&o.length)var l=o.map((e=>function(e){return{value:e.slug,label:e.name}}(e)));else l=[{value:"",label:"Wait for it..."}];return(0,c.jsx)(s.SelectControl,{label:"Post Type",value:e.value,options:l,onChange:e.onChange})},u=window.wp.apiFetch;var f=l.n(u);const g={getFields(e,o){const{fields:l}=e;return l}},v={*getFields(e){const o=yield b.getFields("/oiksb/v1/fields");return b.setFields(o)}},b={setFields:e=>({type:"SET_FIELDS",fields:e}),getFields:e=>({type:"GET_FIELDS",path:e})},w={GET_FIELDS:e=>f()({path:e.path})};(0,r.registerStore)("oiksb/fields",{actions:b,controls:w,reducer:function(e={fields:[]},o){return console.log("reducer"),console.log(e),console.log(o),"SET_FIELDS"===o.type?{...e,fields:o.fields}:e},resolvers:v,selectors:g});const h=window.wp.serverSideRender;var y=l.n(h);function m(e,o){var l=function(e){const o=(0,r.useSelect)((e=>e("oiksb/fields").getFields()),[]);console.log("getPostFields"),console.log(o);var l=o.find((({postType:o})=>o===e));return console.log(l),console.log("GPF after"),l}(e);if(!l)return null;var t=l.fields.find((({name:e})=>e===o));return console.log(t),t}const T=e=>{var o=e.postType,l=e.fieldName,t=e.fieldValue,n=function(e,o){var l=m(e,o);return l?l["#title"]:o}(o,l),s=function(e,o){var l=m(e,o);return l?l["#field_type"]:void 0}(o,l);return function(e){console.log(e);var o={text:!1,number:!1};return!o.hasOwnProperty(e)||o.fieldType}(s)?(0,c.jsx)(y(),{block:"oiksb/sb-field-block",attributes:e.attributes}):(0,c.jsxs)("div",{className:"bw_metadata "+l,children:[(0,c.jsx)("span",{className:"label "+l,children:n}),(0,c.jsx)("span",{className:"sep",children:": "}),(0,c.jsx)("span",{className:"value",children:t})]})};(0,t.registerBlockType)("oiksb/sb-field-block",{edit:function({setAttributes:e,attributes:o}){const l=(0,n.useBlockProps)();var t=void 0;t=(0,r.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),o.postType&&(t=o.postType);var[u,f]=(0,i.useEntityProp)("postType",t,"meta");console.log("Meta before"),console.log(u),console.log("MA");const g=u&&""!=o.fieldName?u[o.fieldName]:"Please set Field name";return(0,c.jsxs)(a.Fragment,{children:[(0,c.jsxs)(n.InspectorControls,{children:[(0,c.jsx)(s.PanelBody,{children:(0,c.jsx)(s.PanelRow,{children:(0,c.jsx)(p,{value:o.postType,onChange:function(o){e({postType:o})}})})}),(0,c.jsx)(s.PanelBody,{children:(0,c.jsx)(s.PanelRow,{children:(0,c.jsx)(d,{value:o.fieldName,onChange:o=>{e({fieldName:o})},postType:o.postType})})})]}),(0,c.jsx)("div",{...l,children:(0,c.jsx)(T,{postType:o.postType,fieldName:o.fieldName,fieldValue:g,attributes:o})})]})},save:function(){return null}})}},l={};function t(e){var n=l[e];if(void 0!==n)return n.exports;var s=l[e]={exports:{}};return o[e](s,s.exports,t),s.exports}t.m=o,e=[],t.O=(o,l,n,s)=>{if(!l){var r=1/0;for(d=0;d<e.length;d++){l=e[d][0],n=e[d][1],s=e[d][2];for(var i=!0,a=0;a<l.length;a++)(!1&s||r>=s)&&Object.keys(t.O).every((e=>t.O[e](l[a])))?l.splice(a--,1):(i=!1,s<r&&(r=s));if(i){e.splice(d--,1);var c=n();void 0!==c&&(o=c)}}return o}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[l,n,s]},t.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},t.d=(e,o)=>{for(var l in o)t.o(o,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:o[l]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={143:0,150:0};t.O.j=o=>0===e[o];var o=(o,l)=>{var n,s,r=l[0],i=l[1],a=l[2],c=0;if(r.some((o=>0!==e[o]))){for(n in i)t.o(i,n)&&(t.m[n]=i[n]);if(a)var d=a(t)}for(o&&o(l);c<r.length;c++)s=r[c],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(d)},l=self.webpackChunksb_field_block=self.webpackChunksb_field_block||[];l.forEach(o.bind(null,0)),l.push=o.bind(null,l.push.bind(l))})();var n=t.O(void 0,[150],(()=>t(930)));n=t.O(n)})();